<html>
<head>
 <title>Financial Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/1.1.0/d3-legend.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
        
<style>

html, body, .container{
    height: 100%; 
    min-height: 100%;
}

.top0 {
    float: left;
    width: 70%;
    height: 7%;
    background-color: black;
}

.top1 {
    float: left;
    width: 10%;
    height: 7%;
    background-color: black;
}
.top2 {
    float: left;
    width: 10%;
    height: 7%;
    background-color:black;
}
.top3 {
    float: left;
    width: 10%;
    height: 7%;
    background-color:black;
}

.head2 {
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  font-size: 30px;
  margin: 10px;
  padding-left: 10px;
  color: white
  
}

.menu-button {
  background-color: white; /* Green */
  border: blue;
  color:black;
  padding: 8px 16px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 18px;
  margin: 12px 4px;
  transition-duration: 0.4s;
  cursor: pointer;
}

.menu-button:hover {
  background-color:blue;
  color: white;
}

 .menu-button-selected {
              background-color: red; /* Green */
              border: blue;
              color: white;
              padding: 8px 16px;
              text-align: center;
              text-decoration: none;
              display: inline-block;
              font-size: 18px;
              margin: 12px 4px;
              transition-duration: 0.4s;
              cursor: pointer;
            }


.hspc {
    float: left;
    width: 100%;
    height: 1%;
    background-color: white;
}

.vspc {
    float: right;
    width: 0.1%;
    height: 50%;
    background-color: white;
}

.left{
    float: left;
    width: 47%;
    height: 50%;
    background-color: #F7EFEE;
	  margin: 20px;
	  box-shadow: 5px 10px #888888;
}
.right{
    float: right;
    width: 47%;
    height: 50%;
    background-color: #F7EEEE;
	margin: 20px;
	box-shadow: 5px 10px #888888;
}

.leftnew{
    float: left;
    width: 47%;
    height: 55%;
	background-color: #F7EEEE;
    // background-color: #F2F2F2;
	margin: 20px;
	box-shadow: 5px 10px #888888;
}
.rightnew{
    float: right;
    width: 47%;
    height: 55%;
    background-color: #F7EEEE;
	// background-color: #F2F2F2;
	margin: 20px;
	box-shadow: 5px 10px #888888;
}



      .chart-line {
        fill: none;
        stroke-width: 3px;
      }
    
      .axis text {
        font-family: 'Open Sans', sans-serif;
        font-size: 8pt;
      }
      .axis .label {
        font-size: 18pt;
      }

      .axis path, .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
      }
      
      .color-legend text {
        font-family: 'Open Sans', sans-serif;
        font-size: 8pt;
      }
	  
	  .color-legend1 text {
        font-family: 'Open Sans', sans-serif;
        font-size: 7.5pt;
      }

.table-month {
  border-collapse: collapse;
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  margin-top: 15px;
  margin-left: 30px;  
  font-size: 7.5pt; 
}
.table-month1 {
  border-collapse: collapse;
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  margin-top: 10px;
  margin-left: 30px;  
  font-size: 7pt; 
}

.table-qtr {
  border-collapse: collapse;
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  margin-top: 25px;
  margin-left: 30px;
  table-layout: fixed;  
  width: 500px;
  font-size: 8pt;
}


.head-qtr {
  border-collapse: collapse;
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  margin-top: 15px;
  margin-left: 200px;
 /* border: 1px solid black; */

}

td:empty ,th:empty{
  visibility: hidden;
  display: none;
}

td, th{
  border: 1px solid white;
  padding: 6px;
}

tr:nth-child(1){
  background-color: orange;
  font-weight: bold;
  }

tr:nth-child(2n){
  background-color: lightblue;
  }

.dot {
  fill: #dfsk;
  stroke: #000;
}

.chart-heading {
  border-bottom: 3px solid black;
  background-color: darkblue;
  color: white;
  font-weight: bold;
  padding: 8px;
  margin-top: 0;
  text-align: center;
  font-family: Helvetica, sans-serif;
}


</style>
  
<script language="javascript">

function submitIt()
{
frm1.submit();
}



</script>   
  </head>
  <body> 
    <form id="frm1">

<div class="top0" id="zero"> 
    <p class = "head2">
      Financial Dashboard
    </p>
  </div>

  <div class="top1" id="one" onclick='submitIt();'>

      <button class ="menu-button" id="rev" onclick="form.action='/Dashboardd3/FetchRevGp';" >Rev and GP</button>  
      
      </div>
      <div class="top2" id="two" onclick='submitIt();'>
      
      <button class ="menu-button-selected" id="sign"  onclick="form.action='/Dashboardd3/FetchSigning';">Signing</button> 
      </div>
      
      <div class="top3" id="three" onclick='submitIt();'>
      <button class ="menu-button" id="hc"  onclick="form.action='/Dashboardd3/FetchHcount';">Head Count</button>
  </div>
      
  <div class="hspc"></div>

  <div id="container" class="left">
    <p class= "chart-heading">
      PA Level Monthly Cumulative Signing Trend - YOY (in $M CAD)
    </p>


  </div>
  <div class="vspc"></div>
  <div id="container1" class="right">
      <p class= "chart-heading">
          PA Level Quarterly Signing Trend - YOY
      </p>
  </div>

  <div class="hspc"></div>
  <div id="containerBMO" class="left">
      <p class= "chart-heading">
          BMO Monthly Cumulative Signing Trend - YOY (in $M CAD)
      </p>
  </div>
  <div class="vspc"></div>
  <div id="containerBMO1" class="right">
    <p class= "chart-heading">
          BMO Quarterly Signing Trend - YOY
    </p>
  </div>
  
  <div class="hspc"></div>
  <div id="containerCIBC" class="leftnew">
      <p class= "chart-heading">
          CIBC Monthly Cumulative Signing Trend - YOY (in $M CAD)
      </p>
  </div>
  <div class="vspc"></div>
  <div id="containerCIBC1" class="rightnew">
      <p class= "chart-heading">
          CIBC Quarterly Signing Trend - YOY
      </p>
  </div>
  
  <div class="hspc"></div>
  <div id="containerSCOTIA" class="left">
      <p class= "chart-heading">
          SCOTIA Monthly Cumulative Signing Trend - YOY (in $M CAD)
      </p>
  </div>
  <div class="vspc"></div>
  <div id="containerSCOTIA1" class="right">
      <p class= "chart-heading">
          SCOTIA Quarterly Signing Trend - YOY
      </p>
  </div>
  
  
  <div class="hspc"></div>
  <div id="containerRBC" class="left">
      <p class= "chart-heading">
          RBC Monthly Cumulative Signing Trend - YOY (in $M CAD)
      </p>
  </div>
  <div class="vspc"></div>
  <div id="containerRBC1" class="right">
      <p class= "chart-heading">
          RBC Quarterly Signing Trend - YOY
      </p>
  </div>
  
  <div class="hspc"></div>
  <div id="containerMANULIFE" class="leftnew">
      <p class= "chart-heading">
          INSURANCE Monthly Cumulative Signing Trend - YOY (in $M CAD)
      </p>
  </div>
  <div class="vspc"></div>
  <div id="containerMANULIFE1" class="rightnew">
      <p class= "chart-heading">
          INSURANCE Quarterly Signing Trend - YOY
      </p>
  </div>

<script>
    var outerWidth = 630;
    var outerHeight = 180;
    var margin = { left: 80, top: 5, right: 70, bottom: 20 };
    
    
    var xColumn = "month";
    var yColumn = "revenue";
    var colorColumn = "year";
    var lineColumn = colorColumn;
    
    var innerWidth  = outerWidth  - margin.left - margin.right; // 1200 - 80 - 50 = 1070
    var innerHeight = outerHeight - margin.top  - margin.bottom; // 300 - 5 - 20  = 275
    var innerWidth1  = outerWidth  - margin.left - margin.right+15; // 1200 - 80 - 50 = 1070
    
    // This will create the svg container with 1200 width and 300 hegith
    var svg = d3.select("#container").append("svg")
    .attr("width", outerWidth)
    .attr("height", outerHeight);

	// this will create transform at x=80 and y=5 g = group
    var g = svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
	
	
    var xAxisG = g.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + innerHeight + ")")
    
    
    var yAxisG = g.append("g")
        .attr("class", "y axis");
    
    // this is year color indicator
    
    var colorLegendG = g.append("g")
    .attr("class", "color-legend")
    .attr("transform", "translate(" + (innerWidth1) + "," + margin.top +")");
    
    var xScale = d3.scale.linear().range([0, innerWidth]);  // xscale
    
    var yScale = d3.scale.linear().range([innerHeight, 0]);  // yscale
    
    var colorScale = d3.scale.category10();
    
    var xAxis = d3.svg.axis().scale(xScale).orient("bottom").ticks(10).outerTickSize(0);


    var yAxis = d3.svg.axis().scale(yScale).orient("left").ticks(10).outerTickSize(0);
    

     //creating the line
      var line = d3.svg.line()
        .x(function(d) { return xScale(d[xColumn]); }) 
        .y(function(d) { return yScale(d[yColumn]); });  
     
     // below is color legend line color
      var colorLegend = d3.legend.color()
      .scale(colorScale)
      .shapePadding(3)
      .shapeWidth(15)
      .shapeHeight(15)
      .labelOffset(10);
      
      
      // actual logic is below to draw the whole with data
      
     
       
     function render(data){


 	    xScale.domain(d3.extent(data, function (d){ return d[xColumn]; })); // passing the data to xcolumm (month) as xaxis
        yScale.domain([0, d3.max(data, function (d){ return d[yColumn]; })]); // passing the data to ycolumm (revenue) as yaxis
        
        

        xAxisG.call(xAxis);  // This will draw the xaxis
        yAxisG.call(yAxis); // This will draw the yaxis


        var nested = d3.nest()
          .key(function (d){ return d[lineColumn]; })   // passing the linecolumn(year) as key 
          .entries(data);
         
         
        colorScale.domain(nested.map(function (d){ return d.key; }));
        
      
        

        var paths = g.selectAll(".chart-line").data(nested);
        
        paths.enter().append("path").attr("class", "chart-line");
        
        paths.exit().remove();
        
     
        
        // the below code draw the year line in the graph
        paths.attr("d", function (d){
          return line(d.values);}).attr("stroke", function (d){ return colorScale(d.key); });
        
        
   
        g.selectAll(".dot")
        .data(data)
      .enter().append("circle")
        .attr("class", "dot")
        .attr("cx", function(d) { return xScale(d[xColumn]); })
        .attr("cy", function(d) { return yScale(d[yColumn]); })
        .attr("r",  function(d) { 
        	
        	//alert(d.revenue);
        	
        	if(d.revenue >= 0 || d.revenue < 0 )
        		{
        		return 3.5;
        		}
        	else{
        		
        		return 0;
        	}
        });
    
        
        
       
        colorLegendG.call(colorLegend);
      
      }
     
      function type(d){
          // d.year = new Date(d.year);
           d.month = +d.month;
           d.revenue = +d.revenue;
           return d;
         }
         
         d3.csv("Signyoy.csv", type, render);
         
      /*   
         var outerWidth = 1200;
         var outerHeight = 300;
         var margin = { left: 80, top:5, right: 50, bottom: 20 };
         var svg = d3.select("body").append("svg")
         .attr("width", 0)
         .attr("height", 0);
         
         var k = svg.append("g") .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
         */
         d3.text("Signyoydata.csv", function(data) {
             var parsedCSV = d3.csv.parseRows(data);
             // var cana = d3.select("body").append("svg");
             
             
            
             //<svg id="abc" width="1200" height="300" viewBox="-20 -20 800 800" preserveAspectRatio="none"></svg>
             
            var container = d3.select("#container").
            
            append("g")
                .append("table").attr("class", "table-month") 
                .selectAll("tr")
                     .data(parsedCSV).enter()
                     .append("tr")
                     .attr("class", "head")
                 .selectAll("td")
                     .data(function(d) { return d; }).enter()
                     .append("td")
                     .text(function(d) { return d; });
         });
         
       
    </script>
    
    
    
    
  <script>
    
  //signing yoy PA start
    var outerWidth = 630;
    var outerHeight = 160;
    
    //var outerWidth = 700;
    //var outerHeight = 280;
    var margin = { left: 110, top: 5, right: 100, bottom: 5 };
    
      var barPadding = 0.25;
	

     var xColumn = "month";
    var yColumn = "revenue";
    var colorColumn = "year";
      var layerColumn = colorColumn;
	  	
      var innerWidth  = outerWidth  - margin.left - margin.right;
      var innerHeight = outerHeight - margin.top  - margin.bottom;

      var svgN = d3.select("#container1").append("svg")
        .attr("width",  outerWidth)
        .attr("height", outerHeight);
        
      var g8 = svgN.append("g")
        .attr("transform", "translate(" + margin.left + "," + (margin.top) + ")");
        
      var xAxisG8 = g8.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + innerHeight + ")");
        //   .attr("transform", "translate(0," + (innerHeight) + ")");
      var yAxisG8 = g8.append("g")
        .attr("class", "y axis");
        
      var colorLegendG8 = g8.append("g")
        .attr("class", "color-legend")
        .attr("transform", "translate(" + (innerWidth+10) + "," + margin.top +")");
        
        

      var xScale8 = d3.scale.ordinal().rangeBands([0, innerWidth], barPadding);
      var yScale8 = d3.scale.linear().range([(innerHeight), 0]);
      var colorScale8 = d3.scale.category10();

      var xAxis8 = d3.svg.axis().scale(xScale8).orient("bottom")
        .outerTickSize(0);
      var yAxis8 = d3.svg.axis().scale(yScale8).orient("left")
        .ticks(5)
        .tickFormat(d3.format("s"))
        .outerTickSize(0);

     
        
      var colorLegend8 = d3.legend.color()
      .scale(colorScale8)
      .shapePadding(3)
      .shapeWidth(15)
      .shapeHeight(15)
      .labelOffset(10);

      function render(data){

        var nested = d3.nest()
          .key(function (d){ return d[layerColumn]; })
          .entries(data)

        var stack = d3.layout.stack()
          .y(function (d){ return d[yColumn]; })
          .values(function (d){ return d.values; });

        var layers = stack(nested);

        xScale8.domain(layers[0].values.map(function (d){
          return d[xColumn];
        }));

        yScale8.domain([
          0,
          d3.max(layers, function (layer){
            return d3.max(layer.values, function (d){
              return d.y;
            });
          })
        ]);

        colorScale8.domain(layers.map(function (layer){
          return layer.key;
        }));

        xAxisG8.call(xAxis8);
        yAxisG8.call(yAxis8);

        var layers = g8.selectAll(".layer").data(layers);
        layers.enter().append("g").attr("class", "layer");
        layers.exit().remove();
        layers.style("fill", function (d){
          return colorScale8(d.key);
        });

        var bars = layers.selectAll("rect").data(function (d){
          return d.values;
        });
        var barWidth = xScale8.rangeBand() / colorScale8.domain().length;
        bars.enter().append("rect")
        bars.exit().remove();
        bars
          .attr("x", function (d, i, j){
            return xScale8(d[xColumn]) + barWidth * j;
          })
          .attr("y", function (d){ return yScale8(d.y); })
          .attr("width", barWidth)
          .attr("height", function (d){ return innerHeight - yScale8(d.y); })

        colorLegendG8.call(colorLegend8);
      }

      function type(d2){
           d2.revenue = +d2.revenue;
        return d2;
      }

      d3.csv("SignQuar.csv", type, render);
      
       d3.text("SignQuardata.csv", function(data) {
             var parsedCSV = d3.csv.parseRows(data);
            var container = d3.select("#container1").
            
            append("g")
                .append("table")
                    .attr("class", "table-qtr") 
                    .selectAll("tr")
                     .data(parsedCSV).enter()
                     .append("tr")
                     .attr("class", "head")
                 .selectAll("td")
                     .data(function(d) { return d; }).enter()
                     .append("td")
                     .text(function(d) { return d; });
         });
         
    
    </script>
    
    
   <script>
    var outerWidth = 700;
    var outerHeight = 180;
    
    //var outerWidth = 830;
    //var outerHeight = 280;
    var margin = { left: 100, top: 5, right: 120, bottom: 20 };
  
    
    var xColumn = "month";
    var yColumn = "revenue";
    var colorColumn = "year";
    var lineColumn = colorColumn;
    
    var innerWidth  = outerWidth  - margin.left - margin.right; // 1200 - 80 - 50 = 1070
    var innerHeight = outerHeight - margin.top  - margin.bottom; // 300 - 5 - 20  = 275
    
    
    // This will create the svg container with 1200 width and 300 hegith
    var svg1 = d3.select("#containerBMO").append("svg")
    .attr("width", outerWidth)
    .attr("height", outerHeight);

	// this will create transform at x=80 and y=5 g = group
    var g18 = svg1.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
	
	
    var xAxisG18 = g18.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + innerHeight + ")")
    
    
    var yAxisG18 = g18.append("g")
        .attr("class", "y axis");
    
    // this is year color indicator
    
    var colorLegendG18 = g18.append("g")
    .attr("class", "color-legend")
    .attr("transform", "translate(" + (innerWidth+10) + "," + margin.top +")");
    
    var xScale18 = d3.scale.linear().range([0, innerWidth]);  // xscale
    
    var yScale18 = d3.scale.linear().range([innerHeight, 0]);  // yscale
    
    var colorScale18 = d3.scale.category10();
    
    var xAxis18 = d3.svg.axis().scale(xScale18).orient("bottom").ticks(10).outerTickSize(0);


    var yAxis18 = d3.svg.axis().scale(yScale18).orient("left").ticks(10).outerTickSize(0);
    

     //creating the line
      var line18 = d3.svg.line()
        .x(function(d) { return xScale18(d[xColumn]); }) 
        .y(function(d) { return yScale18(d[yColumn]); });  
     
     // below is color legend line color
      var colorLegend18 = d3.legend.color()
      .scale(colorScale18)
      .shapePadding(3)
      .shapeWidth(15)
      .shapeHeight(10)
      .labelOffset(10);
      
      
      // actual logic is below to draw the whole with data
      
     
       
     function render(data){


 	    xScale18.domain(d3.extent(data, function (d){ return d[xColumn]; })); // passing the data to xcolumm (month) as xaxis
        yScale18.domain([0, d3.max(data, function (d){ return d[yColumn]; })]); // passing the data to ycolumm (revenue) as yaxis
        
        

        xAxisG18.call(xAxis18);  // This will draw the xaxis
        yAxisG18.call(yAxis18); // This will draw the yaxis


        var nested = d3.nest()
          .key(function (d){ return d[lineColumn]; })   // passing the linecolumn(year) as key 
          .entries(data);
         
         
        colorScale18.domain(nested.map(function (d){ return d.key; }));
        
      
        

        var paths = g18.selectAll(".chart-line").data(nested);
        
        paths.enter().append("path").attr("class", "chart-line");
        
        paths.exit().remove();
        
     
        
        // the below code draw the year line in the graph
        paths.attr("d", function (d){
          return line18(d.values);}).attr("stroke", function (d){ return colorScale18(d.key); });
        
        g18.selectAll(".dot")
        .data(data)
      .enter().append("circle")
        .attr("class", "dot")
        .attr("cx", function(d) { return xScale18(d[xColumn]); })
        .attr("cy", function(d) { return yScale18(d[yColumn]); })
        .attr("r",  function(d) { 
        	
        	//alert(d.revenue);
        	
        	if(d.revenue >= 0 || d.revenue < 0 )
        		{
        		return 2;
        		}
        	else{
        		
        		return 0;
        	}
        });
        
        colorLegendG18.call(colorLegend18);
      
      }
     
      function type(d1){
          // d.year = new Date(d.year);
           d1.month = +d1.month;
           d1.revenue = +d1.revenue;
           return d1;
         }
         
         d3.csv("BMOsignyoy.csv", type, render);
    
    
    d3.text("BMOsignyoydata.csv", function(data) {
             var parsedCSV = d3.csv.parseRows(data);
            var container = d3.select("#containerBMO").
            
            append("g")
                .append("table").attr("class", "table-month").selectAll("tr")
                     .data(parsedCSV).enter()
                     .append("tr")
                     .attr("class", "head")
                 .selectAll("td")
                     .data(function(d) { return d; }).enter()
                     .append("td")
                     .text(function(d) { return d; });
         });
   
   </script>
   
   <script>
    var outerWidth = 630;
    var outerHeight = 160;
    
    //var outerWidth = 700;
    //var outerHeight = 280;
    //var margin = { left: 150, top: 5, right: 60, bottom: 5 };
    var margin = { left: 110, top: 5, right: 100, bottom: 5 };
      var barPadding = 0.25;

     var xColumn = "month";
    var yColumn = "revenue";
    var colorColumn = "year";
      var layerColumn = colorColumn;

      var innerWidth  = outerWidth  - margin.left - margin.right;
      var innerHeight = outerHeight - margin.top  - margin.bottom;

      var svg = d3.select("#containerBMO1").append("svg")
        .attr("width",  outerWidth)
        .attr("height", outerHeight);
        
      var g19 = svg.append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        
      var xAxisG19 = g19.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + innerHeight + ")");
        
      var yAxisG19 = g19.append("g")
        .attr("class", "y axis");
        
      var colorLegendG19 = g19.append("g")
        .attr("class", "color-legend")
        .attr("transform", "translate(" + (innerWidth +10) + "," + margin.top +")");
        
        

      var xScale19 = d3.scale.ordinal().rangeBands([0, innerWidth], barPadding);
      var yScale19 = d3.scale.linear().range([innerHeight, 0]);
      var colorScale19 = d3.scale.category10();

      var xAxis19 = d3.svg.axis().scale(xScale19).orient("bottom")
        .outerTickSize(0);
      var yAxis19 = d3.svg.axis().scale(yScale19).orient("left")
        .ticks(5)
        .tickFormat(d3.format("s"))
        .outerTickSize(0);

     
        
      var colorLegend19 = d3.legend.color()
      .scale(colorScale19)
      .shapePadding(3)
      .shapeWidth(15)
      .shapeHeight(10)
      .labelOffset(10);

      function render(data){

        var nested = d3.nest()
          .key(function (d){ return d[layerColumn]; })
          .entries(data)

        var stack = d3.layout.stack()
          .y(function (d){ return d[yColumn]; })
          .values(function (d){ return d.values; });

        var layers = stack(nested);

        xScale19.domain(layers[0].values.map(function (d){
          return d[xColumn];
        }));

        yScale19.domain([
          0,
          d3.max(layers, function (layer){
            return d3.max(layer.values, function (d){
              return d.y;
            });
          })
        ]);

        colorScale19.domain(layers.map(function (layer){
          return layer.key;
        }));

        xAxisG19.call(xAxis19);
        yAxisG19.call(yAxis19);

        var layers = g19.selectAll(".layer").data(layers);
        layers.enter().append("g").attr("class", "layer");
        layers.exit().remove();
        layers.style("fill", function (d){
          return colorScale19(d.key);
        });

        var bars = layers.selectAll("rect").data(function (d){
          return d.values;
        });
        var barWidth = xScale19.rangeBand() / colorScale19.domain().length;
        bars.enter().append("rect")
        bars.exit().remove();
        bars
          .attr("x", function (d, i, j){
            return xScale19(d[xColumn]) + barWidth * j;
          })
          .attr("y", function (d){ return yScale19(d.y); })
          .attr("width", barWidth)
          .attr("height", function (d){ return innerHeight - yScale19(d.y); })

        colorLegendG19.call(colorLegend19);
      }

      function type(d5){
           d5.revenue = +d5.revenue;
        return d5;
      }

      d3.csv("BMOsignQuar.csv", type, render);
    
    
   
   
    d3.text("BMOsignQuardata.csv", function(data) {
             var parsedCSV = d3.csv.parseRows(data);
            var container = d3.select("#containerBMO1").
            
            append("g")
                .append("table").attr("class", "table-qtr").selectAll("tr")
                     .data(parsedCSV).enter()
                     .append("tr")
                     .attr("class", "head")
                 .selectAll("td")
                     .data(function(d) { return d; }).enter()
                     .append("td")
                     .text(function(d) { return d; });
         });
   
   </script>
   
   
   
    <script>
   
    var outerWidth = 700;
    var outerHeight = 180;
    //var margin = { left: 80, top: 5, right: 50, bottom: 20 };
    var margin = { left: 100, top: 5, right: 120, bottom: 20 };
    
    var xColumn = "month";
    var yColumn = "revenue";
    var colorColumn = "year";
    var lineColumn = colorColumn;
    
    var innerWidth  = outerWidth  - margin.left - margin.right; // 1200 - 80 - 50 = 1070
    var innerHeight = outerHeight - margin.top  - margin.bottom; // 300 - 5 - 20  = 275
    
    
    // This will create the svg container with 1200 width and 300 hegith
    var svg1 = d3.select("#containerRBC").append("svg")
    .attr("width", outerWidth)
    .attr("height", outerHeight);

	// this will create transform at x=80 and y=5 g = group
    var g20 = svg1.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
	
	
    var xAxisG20 = g20.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + innerHeight + ")")
    
    
    var yAxisG20 = g20.append("g")
        .attr("class", "y axis");
    
    // this is year color indicator
    
    var colorLegendG20 = g20.append("g")
    .attr("class", "color-legend")
    .attr("transform", "translate(" + (innerWidth + 10) + "," + margin.top +")");
    
    var xScale20 = d3.scale.linear().range([0, innerWidth]);  // xscale
    
    var yScale20 = d3.scale.linear().range([innerHeight, 0]);  // yscale
    
    var colorScale20 = d3.scale.category10();
    
    var xAxis20 = d3.svg.axis().scale(xScale20).orient("bottom").ticks(10).outerTickSize(0);


    var yAxis20 = d3.svg.axis().scale(yScale20).orient("left").ticks(10).outerTickSize(0);
    

     //creating the line
      var line20 = d3.svg.line()
        .x(function(d) { return xScale20(d[xColumn]); }) 
        .y(function(d) { return yScale20(d[yColumn]); });  
     
     // below is color legend line color
      var colorLegend20 = d3.legend.color()
      .scale(colorScale20)
      .shapePadding(3)
      .shapeWidth(15)
      .shapeHeight(10)
      .labelOffset(10);
      
      
      // actual logic is below to draw the whole with data
      
     
       
     function render(data){


 	    xScale20.domain(d3.extent(data, function (d){ return d[xColumn]; })); // passing the data to xcolumm (month) as xaxis
        yScale20.domain([0, d3.max(data, function (d){ return d[yColumn]; })]); // passing the data to ycolumm (revenue) as yaxis
        
        

        xAxisG20.call(xAxis20);  // This will draw the xaxis
        yAxisG20.call(yAxis20); // This will draw the yaxis


        var nested = d3.nest()
          .key(function (d){ return d[lineColumn]; })   // passing the linecolumn(year) as key 
          .entries(data);
         
         
        colorScale20.domain(nested.map(function (d){ return d.key; }));
        
      
        

        var paths = g20.selectAll(".chart-line").data(nested);
        
        paths.enter().append("path").attr("class", "chart-line");
        
        paths.exit().remove();
        
     
        
        // the below code draw the year line in the graph
        paths.attr("d", function (d){
          return line20(d.values);}).attr("stroke", function (d){ return colorScale20(d.key); });
        
        g20.selectAll(".dot")
        .data(data)
      .enter().append("circle")
        .attr("class", "dot")
        .attr("cx", function(d) { return xScale20(d[xColumn]); })
        .attr("cy", function(d) { return yScale20(d[yColumn]); })
        .attr("r",  function(d) { 
        	
        	//alert(d.revenue);
        	
        	if(d.revenue >= 0 || d.revenue < 0 )
        		{
        		return 2;
        		}
        	else{
        		
        		return 0;
        	}
        });
        
        colorLegendG20.call(colorLegend20);
      
      }
     
      function type(d1){
          // d.year = new Date(d.year);
           d1.month = +d1.month;
           d1.revenue = +d1.revenue;
           return d1;
         }
         
         d3.csv("RBCsignyoy.csv", type, render);
    
   
    d3.text("RBCsignyoydata.csv", function(data) {
             var parsedCSV = d3.csv.parseRows(data);
            var container = d3.select("#containerRBC").
            
            append("g")
                .append("table").attr("class", "table-month").selectAll("tr")
                     .data(parsedCSV).enter()
                     .append("tr")
                     .attr("class", "head")
                 .selectAll("td")
                     .data(function(d) { return d; }).enter()
                     .append("td")
                     .text(function(d) { return d; });
         });
   
   </script>
   
    <script>
   
     // var outerWidth = 700;
	var outerWidth = 630;
     //var outerHeight = 280;
    var outerHeight = 160;
	//var margin = { left: 80, top: 5, right: 50, bottom: 20 };
	var margin = { left: 110, top: 5, right: 100, bottom: 5 };      
	
      var barPadding = 0.25;

     var xColumn = "month";
    var yColumn = "revenue";
    var colorColumn = "year";
      var layerColumn = colorColumn;

      var innerWidth  = outerWidth  - margin.left - margin.right;
      var innerHeight = outerHeight - margin.top  - margin.bottom;

      var svg = d3.select("#containerRBC1").append("svg")
        .attr("width",  outerWidth)
        .attr("height", outerHeight);
        
      var g21 = svg.append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        
      var xAxisG21 = g21.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + innerHeight + ")");
        
      var yAxisG21 = g21.append("g")
        .attr("class", "y axis");
        
      var colorLegendG21 = g21.append("g")
        .attr("class", "color-legend")
        .attr("transform", "translate(" + (innerWidth +10) + "," + margin.top +")");
        
        

      var xScale21 = d3.scale.ordinal().rangeBands([0, innerWidth], barPadding);
      var yScale21 = d3.scale.linear().range([innerHeight, 0]);
      var colorScale21 = d3.scale.category10();

      var xAxis21 = d3.svg.axis().scale(xScale21).orient("bottom")
        .outerTickSize(0);
      var yAxis21 = d3.svg.axis().scale(yScale21).orient("left")
        .ticks(5)
        .tickFormat(d3.format("s"))
        .outerTickSize(0);

     
        
      var colorLegend21 = d3.legend.color()
      .scale(colorScale21)
      .shapePadding(3)
      .shapeWidth(15)
      .shapeHeight(10)
      .labelOffset(10);

      function render(data){

        var nested = d3.nest()
          .key(function (d){ return d[layerColumn]; })
          .entries(data)

        var stack = d3.layout.stack()
          .y(function (d){ return d[yColumn]; })
          .values(function (d){ return d.values; });

        var layers = stack(nested);

        xScale21.domain(layers[0].values.map(function (d){
          return d[xColumn];
        }));

        yScale21.domain([
          0,
          d3.max(layers, function (layer){
            return d3.max(layer.values, function (d){
              return d.y;
            });
          })
        ]);

        colorScale21.domain(layers.map(function (layer){
          return layer.key;
        }));

        xAxisG21.call(xAxis21);
        yAxisG21.call(yAxis21);

        var layers = g21.selectAll(".layer").data(layers);
        layers.enter().append("g").attr("class", "layer");
        layers.exit().remove();
        layers.style("fill", function (d){
          return colorScale21(d.key);
        });

        var bars = layers.selectAll("rect").data(function (d){
          return d.values;
        });
        var barWidth = xScale21.rangeBand() / colorScale21.domain().length;
        bars.enter().append("rect")
        bars.exit().remove();
        bars
          .attr("x", function (d, i, j){
            return xScale21(d[xColumn]) + barWidth * j;
          })
          .attr("y", function (d){ return yScale21(d.y); })
          .attr("width", barWidth)
          .attr("height", function (d){ return innerHeight - yScale21(d.y); })

        colorLegendG21.call(colorLegend21);
      }

      function type(d5){
           d5.revenue = +d5.revenue;
        return d5;
      }

      d3.csv("RBCsignQuar.csv", type, render);
    
   
   
   
    d3.text("RBCsignQuardata.csv", function(data) {
             var parsedCSV = d3.csv.parseRows(data);
            var container = d3.select("#containerRBC1").
            
            append("g")
                .append("table").attr("class", "table-qtr").selectAll("tr")
                     .data(parsedCSV).enter()
                     .append("tr")
                     .attr("class", "head")
                 .selectAll("td")
                     .data(function(d) { return d; }).enter()
                     .append("td")
                     .text(function(d) { return d; });
         });
   
   </script>
   
   
    <script>
   
     //var outerWidth = 830;
   var outerWidth = 700;
    // var outerHeight = 220;
	var outerHeight = 180;
    // var margin = { left: 80, top: 5, right: 50, bottom: 20 };
    var margin = { left: 110, top: 5, right: 110, bottom: 20 };
    
    var xColumn = "month";
    var yColumn = "revenue";
    var colorColumn = "year";
    var lineColumn = colorColumn;
    
    var innerWidth  = outerWidth  - margin.left - margin.right; // 1220 - 80 - 50 = 1070
    var innerHeight = outerHeight - margin.top  - margin.bottom; // 300 - 5 - 22  = 275
    
    
    // This will create the svg container with 1220 width and 300 hegith
    var svg1 = d3.select("#containerCIBC").append("svg")
    .attr("width", outerWidth)
    .attr("height", outerHeight);

	// this will create transform at x=80 and y=5 g = group
    var g22 = svg1.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
	
	
    var xAxisG22 = g22.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + innerHeight + ")")
    
    
    var yAxisG22 = g22.append("g")
        .attr("class", "y axis");
    
    // this is year color indicator
    
    var colorLegendG22 = g22.append("g")
    .attr("class", "color-legend")
    .attr("transform", "translate(" + (innerWidth +5) + "," + margin.top +")");
    
    var xScale22 = d3.scale.linear().range([0, innerWidth]);  // xscale
    
    var yScale22 = d3.scale.linear().range([innerHeight, 0]);  // yscale
    
    var colorScale22 = d3.scale.category10();
    
    var xAxis22 = d3.svg.axis().scale(xScale22).orient("bottom").ticks(10).outerTickSize(0);


    var yAxis22 = d3.svg.axis().scale(yScale22).orient("left").ticks(10).outerTickSize(0);
    

     //creating the line
      var line22 = d3.svg.line()
        .x(function(d) { return xScale22(d[xColumn]); }) 
        .y(function(d) { return yScale22(d[yColumn]); });  
     
     // below is color legend line color
      var colorLegend22 = d3.legend.color()
      .scale(colorScale22)
      .shapePadding(3)
      .shapeWidth(15)
      .shapeHeight(10)
      .labelOffset(10);
      
      
      // actual logic is below to draw the whole with data
      
     
       
     function render(data){


 	    xScale22.domain(d3.extent(data, function (d){ return d[xColumn]; })); // passing the data to xcolumm (month) as xaxis
        yScale22.domain([0, d3.max(data, function (d){ return d[yColumn]; })]); // passing the data to ycolumm (revenue) as yaxis
        
        

        xAxisG22.call(xAxis22);  // This will draw the xaxis
        yAxisG22.call(yAxis22); // This will draw the yaxis


        var nested = d3.nest()
          .key(function (d){ return d[lineColumn]; })   // passing the linecolumn(year) as key 
          .entries(data);
         
         
        colorScale22.domain(nested.map(function (d){ return d.key; }));
        
      
        

        var paths = g22.selectAll(".chart-line").data(nested);
        
        paths.enter().append("path").attr("class", "chart-line");
        
        paths.exit().remove();
        
     
        
        // the below code draw the year line in the graph
        paths.attr("d", function (d){
          return line22(d.values);}).attr("stroke", function (d){ return colorScale22(d.key); });
        
        g22.selectAll(".dot")
        .data(data)
      .enter().append("circle")
        .attr("class", "dot")
        .attr("cx", function(d) { return xScale22(d[xColumn]); })
        .attr("cy", function(d) { return yScale22(d[yColumn]); })
        .attr("r",  function(d) { 
        	
        	//alert(d.revenue);
        	
        	if(d.revenue >= 0 || d.revenue < 0 )
        		{
        		return 2;
        		}
        	else{
        		
        		return 0;
        	}
        });
        
        colorLegendG22.call(colorLegend22);
      
      }
     
      function type(d1){
          // d.year = new Date(d.year);
           d1.month = +d1.month;
           d1.revenue = +d1.revenue;
           return d1;
         }
         
         d3.csv("CIBCsignyoy.csv", type, render);
    
   
    d3.text("CIBCsignyoydata.csv", function(data) {
             var parsedCSV = d3.csv.parseRows(data);
            var container = d3.select("#containerCIBC").
            
            append("g")
                .append("table").attr("class", "table-month").selectAll("tr")
                     .data(parsedCSV).enter()
                     .append("tr")
                     .attr("class", "head")
                 .selectAll("td")
                     .data(function(d) { return d; }).enter()
                     .append("td")
                     .text(function(d) { return d; });
         });
   
   </script>
   
    <script>
   
    //var outerWidth = 700;
    //var outerHeight = 220;
    var outerWidth = 630;
    // var outerHeight = 220;
	var outerHeight = 160;
	
	//var margin = { left: 200, top: 5, right: 50, bottom: 20 };
    //var margin = { left: 80, top: 5, right: 50, bottom: 20 };
    //var margin = { left: 150, top: 5, right: 60, bottom: 5 }; 
	var margin = { left: 110, top: 5, right: 100, bottom: 5 };   	
	var barPadding = 0.25;

     var xColumn = "month";
    var yColumn = "revenue";
    var colorColumn = "year";
      var layerColumn = colorColumn;

      var innerWidth  = outerWidth  - margin.left - margin.right;
      var innerHeight = outerHeight - margin.top  - margin.bottom;

      var svg = d3.select("#containerCIBC1").append("svg")
        .attr("width",  outerWidth)
        .attr("height", outerHeight);
        
      var g23 = svg.append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        
      var xAxisG23 = g23.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + innerHeight + ")");
        
      var yAxisG23 = g23.append("g")
        .attr("class", "y axis");
        
      var colorLegendG23 = g23.append("g")
        .attr("class", "color-legend")
        .attr("transform", "translate(" + (innerWidth +10) + "," + margin.top +")");
        
        

      var xScale23 = d3.scale.ordinal().rangeBands([0, innerWidth], barPadding);
      var yScale23 = d3.scale.linear().range([innerHeight, 0]);
      var colorScale23 = d3.scale.category10();

      var xAxis23 = d3.svg.axis().scale(xScale23).orient("bottom")
        .outerTickSize(0);
      var yAxis23 = d3.svg.axis().scale(yScale23).orient("left")
        .ticks(5)
        .tickFormat(d3.format("s"))
        .outerTickSize(0);

     
        
      var colorLegend23 = d3.legend.color()
      .scale(colorScale23)
      .shapePadding(3)
      .shapeWidth(15)
      .shapeHeight(10)
      .labelOffset(10);

      function render(data){

        var nested = d3.nest()
          .key(function (d){ return d[layerColumn]; })
          .entries(data)

        var stack = d3.layout.stack()
          .y(function (d){ return d[yColumn]; })
          .values(function (d){ return d.values; });

        var layers = stack(nested);

        xScale23.domain(layers[0].values.map(function (d){
          return d[xColumn];
        }));

        yScale23.domain([
          0,
          d3.max(layers, function (layer){
            return d3.max(layer.values, function (d){
              return d.y;
            });
          })
        ]);

        colorScale23.domain(layers.map(function (layer){
          return layer.key;
        }));

        xAxisG23.call(xAxis23);
        yAxisG23.call(yAxis23);

        var layers = g23.selectAll(".layer").data(layers);
        layers.enter().append("g").attr("class", "layer");
        layers.exit().remove();
        layers.style("fill", function (d){
          return colorScale23(d.key);
        });

        var bars = layers.selectAll("rect").data(function (d){
          return d.values;
        });
        var barWidth = xScale23.rangeBand() / colorScale23.domain().length;
        bars.enter().append("rect")
        bars.exit().remove();
        bars
          .attr("x", function (d, i, j){
            return xScale23(d[xColumn]) + barWidth * j;
          })
          .attr("y", function (d){ return yScale23(d.y); })
          .attr("width", barWidth)
          .attr("height", function (d){ return innerHeight - yScale23(d.y); })

        colorLegendG23.call(colorLegend23);
      }

      function type(d5){
           d5.revenue = +d5.revenue;
        return d5;
      }

      d3.csv("CIBCsignQuar.csv", type, render);
    
      
   
    d3.text("CIBCsignQuardata.csv", function(data) {
             var parsedCSV = d3.csv.parseRows(data);
            var container = d3.select("#containerCIBC1").
            
            append("g")
                .append("table").attr("class", "table-qtr").selectAll("tr")
                     .data(parsedCSV).enter()
                     .append("tr")
                     .attr("class", "head")
                 .selectAll("td")
                     .data(function(d) { return d; }).enter()
                     .append("td")
                     .text(function(d) { return d; });
         });
   
   </script>
   
   
   <script>
   
    // var outerWidth = 830;
    // var outerHeight = 280;
	var outerWidth = 700;
    var outerHeight = 180;
    //var margin = { left: 80, top: 5, right: 50, bottom: 20 };
  var margin = { left: 110, top: 5, right: 110, bottom: 20 };
    var xColumn = "month";
    var yColumn = "revenue";
    var colorColumn = "year";
    var lineColumn = colorColumn;
    
    var innerWidth  = outerWidth  - margin.left - margin.right; // 1240 - 80 - 50 = 1070
    var innerHeight = outerHeight - margin.top  - margin.bottom; // 300 - 5 - 24  = 275
    
    
    // This will create the svg container with 1240 width and 300 hegith
    var svg = d3.select("#containerSCOTIA").append("svg")
    .attr("width", outerWidth)
    .attr("height", outerHeight);

	// this will create transform at x=80 and y=5 g = group
    var g24 = svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
	
	
    var xAxisG24 = g24.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + innerHeight + ")")
    
    
    var yAxisG24 = g24.append("g")
        .attr("class", "y axis");
    
    // this is year color indicator
    
    var colorLegendG24 = g24.append("g")
    .attr("class", "color-legend")
    .attr("transform", "translate(" + (innerWidth +5 ) + "," + margin.top +")");
    
    var xScale24 = d3.scale.linear().range([0, innerWidth]);  // xscale
    
    var yScale24 = d3.scale.linear().range([innerHeight, 0]);  // yscale
    
    var colorScale24 = d3.scale.category10();
    
    var xAxis24 = d3.svg.axis().scale(xScale24).orient("bottom").ticks(10).outerTickSize(0);


    var yAxis24 = d3.svg.axis().scale(yScale24).orient("left").ticks(10).outerTickSize(0);
    

     //creating the line
      var line24 = d3.svg.line()
        .x(function(d) { return xScale24(d[xColumn]); }) 
        .y(function(d) { return yScale24(d[yColumn]); });  
     
     // below is color legend line color
      var colorLegend24 = d3.legend.color()
      .scale(colorScale24)
      .shapePadding(3)
      .shapeWidth(15)
      .shapeHeight(10)
      .labelOffset(10);
      
      
      // actual logic is below to draw the whole with data
      
     
       
     function render(data){


 	    xScale24.domain(d3.extent(data, function (d){ return d[xColumn]; })); // passing the data to xcolumm (month) as xaxis
        yScale24.domain([0, d3.max(data, function (d){ return d[yColumn]; })]); // passing the data to ycolumm (revenue) as yaxis
        
        

        xAxisG24.call(xAxis24);  // This will draw the xaxis
        yAxisG24.call(yAxis24); // This will draw the yaxis


        var nested = d3.nest()
          .key(function (d){ return d[lineColumn]; })   // passing the linecolumn(year) as key 
          .entries(data);
         
         
        colorScale24.domain(nested.map(function (d){ return d.key; }));
        
      
        

        var paths = g24.selectAll(".chart-line").data(nested);
        
        paths.enter().append("path").attr("class", "chart-line");
        
        paths.exit().remove();
        
     
        
        // the below code draw the year line in the graph
        paths.attr("d", function (d){
          return line24(d.values);}).attr("stroke", function (d){ return colorScale24(d.key); });
        
        
        g24.selectAll(".dot")
        .data(data)
      .enter().append("circle")
        .attr("class", "dot")
        .attr("cx", function(d) { return xScale24(d[xColumn]); })
        .attr("cy", function(d) { return yScale24(d[yColumn]); })
        .attr("r",  function(d) { 
        	
        	//alert(d.revenue);
        	
        	if(d.revenue >= 0 || d.revenue < 0 )
        		{
        		return 2;
        		}
        	else{
        		
        		return 0;
        	}
        });
        
        colorLegendG24.call(colorLegend24);
      
      }
     
      function type(d1){
          // d.year = new Date(d.year);
           d1.month = +d1.month;
           d1.revenue = +d1.revenue;
           return d1;
         }
         
         d3.csv("SCOTIAsignyoy.csv", type, render);
    
    
    d3.text("SCOTIAsignyoydata.csv", function(data) {
             var parsedCSV = d3.csv.parseRows(data);
            var container = d3.select("#containerSCOTIA").
            
            append("g")
                .append("table").attr("class", "table-month").selectAll("tr")
                     .data(parsedCSV).enter()
                     .append("tr")
                     .attr("class", "head")
                 .selectAll("td")
                     .data(function(d) { return d; }).enter()
                     .append("td")
                     .text(function(d) { return d; });
         });
   
   </script>
   
    <script>
   
   //var outerWidth = 700;
    //var outerHeight = 280;
    // var margin = { left: 200, top: 5, right: 50, bottom: 20 };
	var outerWidth = 630;
    var outerHeight = 160;     
	// var margin = { left: 150, top: 5, right: 70, bottom: 5 };
	var margin = { left: 110, top: 5, right: 100, bottom: 5 };       
	var barPadding = 0.25;

     var xColumn = "month";
    var yColumn = "revenue";
    var colorColumn = "year";
      var layerColumn = colorColumn;

      var innerWidth  = outerWidth  - margin.left - margin.right;
      var innerHeight = outerHeight - margin.top  - margin.bottom;

      var svg = d3.select("#containerSCOTIA1").append("svg")
        .attr("width",  outerWidth)
        .attr("height", outerHeight);
        
      var g25 = svg.append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        
      var xAxisG25 = g25.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + innerHeight + ")");
        
      var yAxisG25 = g25.append("g")
        .attr("class", "y axis");
        
      var colorLegendG25 = g25.append("g")
        .attr("class", "color-legend")
        .attr("transform", "translate(" + (innerWidth +1) + "," + margin.top +")");
        
        

      var xScale25 = d3.scale.ordinal().rangeBands([0, innerWidth], barPadding);
      var yScale25 = d3.scale.linear().range([innerHeight, 0]);
      var colorScale25 = d3.scale.category10();

      var xAxis25 = d3.svg.axis().scale(xScale25).orient("bottom")
        .outerTickSize(0);
      var yAxis25 = d3.svg.axis().scale(yScale25).orient("left")
        .ticks(5)
        .tickFormat(d3.format("s"))
        .outerTickSize(0);

     
        
      var colorLegend25 = d3.legend.color()
      .scale(colorScale25)
      .shapePadding(3)
      .shapeWidth(15)
      .shapeHeight(10)
      .labelOffset(10);

      function render(data){

        var nested = d3.nest()
          .key(function (d){ return d[layerColumn]; })
          .entries(data)

        var stack = d3.layout.stack()
          .y(function (d){ return d[yColumn]; })
          .values(function (d){ return d.values; });

        var layers = stack(nested);

        xScale25.domain(layers[0].values.map(function (d){
          return d[xColumn];
        }));

        yScale25.domain([
          0,
          d3.max(layers, function (layer){
            return d3.max(layer.values, function (d){
              return d.y;
            });
          })
        ]);

        colorScale25.domain(layers.map(function (layer){
          return layer.key;
        }));

        xAxisG25.call(xAxis25);
        yAxisG25.call(yAxis25);

        var layers = g25.selectAll(".layer").data(layers);
        layers.enter().append("g").attr("class", "layer");
        layers.exit().remove();
        layers.style("fill", function (d){
          return colorScale25(d.key);
        });

        var bars = layers.selectAll("rect").data(function (d){
          return d.values;
        });
        var barWidth = xScale25.rangeBand() / colorScale25.domain().length;
        bars.enter().append("rect")
        bars.exit().remove();
        bars
          .attr("x", function (d, i, j){
            return xScale25(d[xColumn]) + barWidth * j;
          })
          .attr("y", function (d){ return yScale25(d.y); })
          .attr("width", barWidth)
          .attr("height", function (d){ return innerHeight - yScale25(d.y); })

        colorLegendG25.call(colorLegend25);
      }

      function type(d5){
           d5.revenue = +d5.revenue;
        return d5;
      }

      d3.csv("SCOTIAsignQuar.csv", type, render);
    
  
   
   
   
    d3.text("SCOTIAsignQuardata.csv", function(data) {
             var parsedCSV = d3.csv.parseRows(data);
            var container = d3.select("#containerSCOTIA1").
            
            append("g")
                .append("table").attr("class", "table-qtr").selectAll("tr")
                     .data(parsedCSV).enter()
                     .append("tr")
                     .attr("class", "head")
                 .selectAll("td")
                     .data(function(d) { return d; }).enter()
                     .append("td")
                     .text(function(d) { return d; });
         });
   
   </script>
   
    <script>
   
    //var outerWidth = 830;
    //var outerHeight = 220;
	var outerWidth = 700;
    var outerHeight = 180;
    //var margin = { left: 80, top: 5, right: 50, bottom: 20 };
    var margin = { left: 120, top: 5, right: 120, bottom: 20 };
    
    var xColumn = "month";
    var yColumn = "revenue";
    var colorColumn = "year";
    var lineColumn = colorColumn;
    
    var innerWidth  = outerWidth  - margin.left - margin.right; // 1260 - 80 - 50 = 1070
    var innerHeight = outerHeight - margin.top  - margin.bottom; // 300 - 5 - 26  = 275
    
    
    // This will create the svg container with 1260 width and 300 hegith
    var svg1 = d3.select("#containerMANULIFE").append("svg")
    .attr("width", outerWidth)
    .attr("height", (outerHeight));

	// this will create transform at x=80 and y=5 g = group
    var g26 = svg1.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
	
	
    var xAxisG26 = g26.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + innerHeight + ")")
    
    
    var yAxisG26 = g26.append("g")
        .attr("class", "y axis");
    
    // this is year color indicator
    
    var colorLegendG26 = g26.append("g")
    .attr("class", "color-legend1")
    .attr("transform", "translate(" + (innerWidth +5) + "," + margin.top +")");
    
    var xScale26 = d3.scale.linear().range([0, innerWidth]);  // xscale
    
    var yScale26 = d3.scale.linear().range([innerHeight, 0]);  // yscale
    
    var colorScale26 = d3.scale.category10();
    
    var xAxis26 = d3.svg.axis().scale(xScale26).orient("bottom").ticks(10).outerTickSize(0);


    var yAxis26 = d3.svg.axis().scale(yScale26).orient("left").ticks(10).outerTickSize(0);
    

     //creating the line
      var line26 = d3.svg.line()
        .x(function(d) { return xScale26(d[xColumn]); }) 
        .y(function(d) { return yScale26(d[yColumn]); });  
     
     // below is color legend line color
      var colorLegend26 = d3.legend.color()
      .scale(colorScale26)
      .shapePadding(3)
      .shapeWidth(15)
      .shapeHeight(10)
      .labelOffset(10);
      
      
      // actual logic is below to draw the whole with data
      
     
       
     function render(data){


 	    xScale26.domain(d3.extent(data, function (d){ return d[xColumn]; })); // passing the data to xcolumm (month) as xaxis
        yScale26.domain([-0.5, d3.max(data, function (d){ return d[yColumn]; })]); // passing the data to ycolumm (revenue) as yaxis
        
        

        xAxisG26.call(xAxis26);  // This will draw the xaxis
        yAxisG26.call(yAxis26); // This will draw the yaxis


        var nested = d3.nest()
          .key(function (d){ return d[lineColumn]; })   // passing the linecolumn(year) as key 
          .entries(data);
         
         
        colorScale26.domain(nested.map(function (d){ return d.key; }));
        
      
        

        var paths = g26.selectAll(".chart-line").data(nested);
        
        paths.enter().append("path").attr("class", "chart-line");
        
        paths.exit().remove();
        
     
        
        // the below code draw the year line in the graph
        paths.attr("d", function (d){
          return line26(d.values);}).attr("stroke", function (d){ return colorScale26(d.key); });
        
        g26.selectAll(".dot")
        .data(data)
      .enter().append("circle")
        .attr("class", "dot")
        .attr("cx", function(d) { return xScale26(d[xColumn]); })
        .attr("cy", function(d) { return yScale26(d[yColumn]); })
        .attr("r",  function(d) { 
        	
        	//alert(d.revenue);
        	
        	if(d.revenue >= 0 || d.revenue < 0 )
        		{
        		return 2;
        		}
        	else{
        		
        		return 0;
        	}
        });
        
        colorLegendG26.call(colorLegend26);
      
      }
     
      function type(d1){
          // d.year = new Date(d.year);
           d1.month = +d1.month;
           d1.revenue = +d1.revenue;
           return d1;
         }
         
         d3.csv("MANULIFEsignyoy.csv", type, render);
    
   
    d3.text("MANULIFEsignyoydata.csv", function(data) {
             var parsedCSV = d3.csv.parseRows(data);
            var container = d3.select("#containerMANULIFE").
            
            append("g")
                .append("table").attr("class", "table-month1").selectAll("tr")
                     .data(parsedCSV).enter()
                     .append("tr")
                     .attr("class", "head")
                 .selectAll("td")
                     .data(function(d) { return d; }).enter()
                     .append("td")
                     .text(function(d) { return d; });
         });
   
   </script>
   
   
  <script>
   
    //var outerWidth = 700;
    //var outerHeight = 280;
    //var margin = { left: 200, top: 5, right: 50, bottom: 20 };
    //var margin = { left: 150, top: 5, right: 60, bottom: 5 };
	var margin = { left: 110, top: 5, right: 100, bottom: 5 };   
	var outerWidth = 630;
    var outerHeight = 160;
      var barPadding = 0.25;

     var xColumn = "month";
    var yColumn = "revenue";
    var colorColumn = "year";
      var layerColumn = colorColumn;

      var innerWidth  = outerWidth  - margin.left - margin.right;
      var innerHeight = outerHeight - margin.top  - margin.bottom;

      var svg = d3.select("#containerMANULIFE1").append("svg")
        .attr("width",  outerWidth)
        .attr("height", outerHeight);
        
      var g27 = svg.append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        
      var xAxisG27 = g27.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + innerHeight + ")");
        
      var yAxisG27 = g27.append("g")
        .attr("class", "y axis");
        
      var colorLegendG27 = g27.append("g")
        .attr("class", "color-legend")
        .attr("transform", "translate(" + (innerWidth -12) + "," + margin.top +")");
        
        

      var xScale27 = d3.scale.ordinal().rangeBands([0, innerWidth], barPadding);
      var yScale27 = d3.scale.linear().range([innerHeight, 0]);
      var colorScale27 = d3.scale.category10();

      var xAxis27 = d3.svg.axis().scale(xScale27).orient("bottom")
        .outerTickSize(0);
      var yAxis27 = d3.svg.axis().scale(yScale27).orient("left")
        .ticks(5)
        .tickFormat(d3.format("s"))
        .outerTickSize(0);

     
        
      var colorLegend27 = d3.legend.color()
      .scale(colorScale27)
      .shapePadding(4)
      .shapeWidth(15)
      .shapeHeight(10)
      .labelOffset(10);

      function render(data){

        var nested = d3.nest()
          .key(function (d){ return d[layerColumn]; })
          .entries(data)

        var stack = d3.layout.stack()
          .y(function (d){ return d[yColumn]; })
          .values(function (d){ return d.values; });

        var layers = stack(nested);

        xScale27.domain(layers[0].values.map(function (d){
          return d[xColumn];
        }));

        yScale27.domain([
          0,
          d3.max(layers, function (layer){
            return d3.max(layer.values, function (d){
              return d.y;
            });
          })
        ]);

        colorScale27.domain(layers.map(function (layer){
          return layer.key;
        }));

        xAxisG27.call(xAxis27);
        yAxisG27.call(yAxis27);

        var layers = g27.selectAll(".layer").data(layers);
        layers.enter().append("g").attr("class", "layer");
        layers.exit().remove();
        layers.style("fill", function (d){
          return colorScale27(d.key);
        });

        var bars = layers.selectAll("rect").data(function (d){
          return d.values;
        });
        var barWidth = xScale27.rangeBand() / colorScale27.domain().length;
        bars.enter().append("rect")
        bars.exit().remove();
        bars
          .attr("x", function (d, i, j){
            return xScale27(d[xColumn]) + barWidth * j;
          })
          .attr("y", function (d){ return yScale27(d.y); })
          .attr("width", barWidth)
          .attr("height", function (d){ return innerHeight - yScale27(d.y); })

        colorLegendG27.call(colorLegend27);
      }

      function type(d5){
           d5.revenue = +d5.revenue;
        return d5;
      }

      d3.csv("MANULIFEsignQuar.csv", type, render);
    
   
   
   
    d3.text("MANULIFEsignQuardata.csv", function(data) {
             var parsedCSV = d3.csv.parseRows(data);
            var container = d3.select("#containerMANULIFE1").
            
            append("g")
                .append("table").attr("class", "table-qtr").selectAll("tr")
                     .data(parsedCSV).enter()
                     .append("tr")
                     .attr("class", "head")
                 .selectAll("td")
                     .data(function(d) { return d; }).enter()
                     .append("td")
                     .text(function(d) { return d; });
         });
   
</script>
  
    
</form>
</body>
</html>